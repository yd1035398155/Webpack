# webpack 性能优化

- 开发环境优化
- 生产环境优化

## 开发环境性能优化

- 优化打包构建速度
  - HMR(热模块替换,hot module replacement):一个模块发生变化,只会重新打包这一个模块(而不是打包所有模块)
- 优化代码调试
  - source-map:一种提供源代码到构建后代码映射的技术(如果构建后代码出错了,通过映射关系可以追踪源代码错误)

## 生产环境性能优化

- 优化打包构建速度

  - oneOf:在有许多 (js/css/html/img...) loader 的情况下,匹配到了对应的 loader 就不继续往下匹配了.
  - babel 缓存:100 个 js 模块，其中 1 个变了，那么应该只变这 1 个 js 文件.第二次构建 js 时,会使用缓存(文件资源缓存同理)

  - 多进程打包:每个进程的开启和交流都会消耗 600ms 左右

  - externals:让某些库不打包,并通过 CDN 引入
  - dll:让某些库不打包,webpack.dll.js 先打包好,以后就不打包直接用

- 优化代码运行的性能

  - 文件资源缓存(hash-chunkhash-contenthash)

  - tree shaking:去除无用代码

  - code split:分为
    - 单入口:至少有两个 js 文件(一个自己的源代码,一个 node_modules 里的文件),每引入一个 import 就多分割一份 js 文件
    - 多入口:有多少入口就有多少文件
  - 懒加载/预加载:当文件需要使用时才加载

  - pwa:渐进式网络开发应用程序（离线也可访问）
